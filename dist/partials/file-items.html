<div ng-controller="FileListCtrl" id="list" class="table-responsive">
<div class="alert alert-info alert-dismissable" ng-show="statusDetails.code===202">
  Requesting file list...
</div>
<div ng-class="{alert:true, 'alert-info':(bucketCreationStatus.code < 300), 'alert-danger':(bucketCreationStatus.code > 299), 'alert-dismissable':true}" ng-show="statusDetails.code===404">
  <button class="btn btn-success btn-fixed-width" type="button" ng-click="createBucket()">
    <span title="Create initial storage folder">
      Create initial storage folder <i class="fa fa-white fa-check icon-right"></i>
    </span>
  </button>
  <span ng-show="bucketCreationStatus.code > 299">
    Could not create initial folder for {{bucketCreationStatus.userEmail}}
  </span>
</div>
<div class="alert alert-danger" ng-show="statusDetails.code===403">
  You are not authorized to view this Company's files
</div>
<div id="cookieTester" class="alert alert-danger" ng-controller="cookieTesterController as cookieController">
  <div ng-show="!cookieController.status.passed">
      {{cookieController.status.message}}
  </div>
  <div ng-hide="!cookieController.status.passed">
    <div id="gapiLoadNotice" class="alert alert-danger" ng-controller="gapiClientController as gapiController" ng-show="!gapiController.gapiClientFullyLoaded">
    Loading storage functions
    </div>

    <div id="oauthNotice" class="alert alert-danger" ng-hide="statusDetails.code !== 401 && statusDetails.code !== 400 && isAuthed === true">
      <span>Rise Vision needs access to your Google account to verify who you are </span>
      <button class="btn btn-primary btn-sm" type="button" ng-click="login()">
        <span title="Initiate Permission Request" 
              class="fa fa-check"> Okay</span>
      </button>
    </div>
  </div>
</div>
<table id="filesTable" class="table filetable table-hover" ng-show="statusDetails.code!==202">
  <thead>
    <tr>
      <th class="text-left check-col">
        <input type="checkbox" ng-model="selectAll" ng-change="selectAllCheckboxes()">
      </th>
      <th class="" ng-click="orderByAttribute = 'name'; reverseSort = !reverseSort">
        <a href="">File Name
          <span ng-show="orderByAttribute=='name'">
            <span ng-show="reverseSort">
              <i class="fa fa-sort-alpha-desc"></i>
            </span>
            <span ng-show="!reverseSort">
              <i class="fa fa-sort-alpha-asc"></i>
            </span>
          </span>
        </a>
      </th>
      <th class="type-col text-right" ng-click="orderByAttribute = fileExtOrderFunction; reverseSort = !reverseSort">
        <a href="">Type
          <span ng-show="orderByAttribute==fileExtOrderFunction">
            <span ng-show="reverseSort">
              <i class="fa fa-sort-asc"></i>
            </span>
            <span ng-show="!reverseSort">
              <i class="fa fa-sort-desc"></i>
            </span>
          </span>
        </a>
      </th>
      <th class="filesize-col text-right" ng-click="orderByAttribute = fileSizeOrderFunction; reverseSort = !reverseSort">
        <a href="">File Size
          <span ng-show="orderByAttribute==fileSizeOrderFunction">
            <span ng-show="reverseSort">
              <i class="fa fa-sort-asc"></i>
            </span>
            <span ng-show="!reverseSort">
              <i class="fa fa-sort-desc"></i>
            </span>
          </span>
        </a>
      </th>
      <th class="datemod-col text-right" ng-click="orderByAttribute = dateModifiedOrderFunction; reverseSort = !reverseSort">
        <a href="">Date Modified
          <span ng-show="orderByAttribute==dateModifiedOrderFunction">
            <span ng-show="reverseSort">
              <i class="fa fa-sort-desc"></i>
            </span>
            <span ng-show="!reverseSort">
              <i class="fa fa-sort-asc"></i>
            </span>
          </span>
        </a>
      </th>
    </tr>
  </thead>
  <tbody>
    <tr ng-repeat="file in filesDetails.files | filter:query | orderBy:orderByAttribute:reverseSort" ng-class="{active: file.isChecked}">
      <td class="text-left">
        <input type="checkbox" ng-model="file.isChecked" ng-change="fileCheckToggled(file)" ng-show="!fileIsCurrentFolder(file)">
      </td>
      <td>
        <a href="" data-toggle="tooltip" title="{{file.name | fileNameFilter:currentDecodedFolder}}" ng-click="$emit('FileSelectAction', file)">{{file.name | fileNameFilter:currentDecodedFolder}}</a>
      </td>
      <td class="text-right">
        <span>{{file.name | fileTypeFilter}}</span>
      </td>
      <td class="text-right">
        <span> {{file.size | fileSizeFilter}}</span>
      </td>
      <td class="text-right">
        <span> {{file.updated | lastModifiedFilter}}</span>
      </td>
    </tr>
  </tbody>
</table>
</div>
